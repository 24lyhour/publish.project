import{h as w,c as $,o as c,w as s,f as v,g as h,b,r as g,n as O,a as u,t as m,e as S,p as D,T as I,y as N,q as E,u as V,d as j}from"./app-BYXm3DgS.js";import{_ as z}from"./Modal-DLYWPdpP.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as T,a as C}from"./VBtn-DwUAv0Z5.js";import{V as F}from"./VSpacer-GD5n-TXf.js";import{b as q}from"./VSelect-DhBAgf-W.js";const R={key:0,class:"modal-header"},L={class:"header-content"},A={class:"header-text"},G={key:0,class:"modal-title"},H={key:1,class:"modal-subtitle"},J={class:"modal-body"},K={class:"modal-footer"},P={class:"default-footer"},Q={__name:"FlexibleModal",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Modal Title"},subtitle:{type:String,default:null},icon:{type:String,default:null},iconColor:{type:String,default:"primary"},maxWidth:{type:[String,Number],default:600},type:{type:String,default:"default"},confirmText:{type:String,default:"Confirm"},confirmColor:{type:String,default:"primary"},canConfirm:{type:Boolean,default:!0},processing:{type:Boolean,default:!1}},emits:["close","cancel","confirm"],setup(e){const n=e,p=w(()=>typeof n.maxWidth=="number"?n.maxWidth<=400?"sm":n.maxWidth<=600?"md":n.maxWidth<=800?"lg":n.maxWidth<=1e3?"xl":"2xl":n.maxWidth);return(t,o)=>(c(),$(z,{show:e.show,"max-width":p.value,closeable:!e.processing,onClose:o[2]||(o[2]=d=>t.$emit("close"))},{default:s(()=>[e.title||e.subtitle||e.icon?(c(),v("div",R,[b("div",L,[e.icon?(c(),v("div",{key:0,class:O(["header-icon",`text-${e.iconColor}`])},[u(T,{icon:e.icon,size:"32"},null,8,["icon"])],2)):h("",!0),b("div",A,[e.title?(c(),v("h3",G,m(e.title),1)):h("",!0),e.subtitle?(c(),v("p",H,m(e.subtitle),1)):h("",!0)])]),g(t.$slots,"header",{},void 0,!0)])):h("",!0),b("div",J,[g(t.$slots,"content",{},void 0,!0)]),b("div",K,[g(t.$slots,"footer",{},()=>[b("div",P,[u(C,{variant:"outlined",onClick:o[0]||(o[0]=d=>t.$emit("cancel")),disabled:e.processing},{default:s(()=>o[3]||(o[3]=[S(" Cancel ")])),_:1,__:[3]},8,["disabled"]),u(C,{color:e.confirmColor,onClick:o[1]||(o[1]=d=>t.$emit("confirm")),loading:e.processing,disabled:!e.canConfirm},{default:s(()=>[S(m(e.confirmText),1)]),_:1},8,["color","loading","disabled"])])],!0)])]),_:3},8,["show","max-width","closeable"]))}},U=W(Q,[["__scopeId","data-v-4fd0245e"]]),X={__name:"SakalFormModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},subtitle:{type:String,default:null},icon:{type:String,default:null},iconColor:{type:String,default:"primary"},maxWidth:{type:[String,Number],default:700},type:{type:String,default:"default"},method:{type:String,default:"post",validator:e=>["get","post","put","patch","delete"].includes(e)},action:{type:String,default:null},formData:{type:Object,default:()=>({})},cancelText:{type:String,default:"Cancel"},submitText:{type:String,default:"Save"},submitIcon:{type:String,default:null},submitColor:{type:String,default:"primary"},resetOnSuccess:{type:Boolean,default:!0},closeOnSuccess:{type:Boolean,default:!0},autoSubmit:{type:Boolean,default:!0}},emits:["close","cancel","success","error","submit"],setup(e,{expose:n,emit:p}){const t=e,o=p,d=D(null),a=I(t.formData);N(()=>t.formData,l=>{Object.keys(l).forEach(r=>{a[r]=l[r]})},{deep:!0,immediate:!0}),E(()=>{Object.keys(t.formData).length>0&&Object.keys(t.formData).forEach(l=>{a[l]=t.formData[l]})});const i=w(()=>a.processing),M=w(()=>a.errors),x=()=>{a.reset(),a.clearErrors()},y=()=>{i.value||o("close")},B=()=>{i.value||o("cancel")},f=async()=>{var l;if(!i.value){if((l=d.value)!=null&&l.validate){const{valid:r}=await d.value.validate();if(!r)return}if(o("submit",a),t.autoSubmit&&t.action){const r=a[t.method.toLowerCase()];typeof r=="function"&&r(t.action,{preserveScroll:!0,onSuccess:k=>{o("success",k),t.closeOnSuccess&&y(),t.resetOnSuccess&&x()},onError:k=>{o("error",k)}})}}};return n({form:a,submit:f,reset:x,close:y}),(l,r)=>(c(),$(U,{show:e.show,title:e.title,subtitle:e.subtitle,icon:e.icon,"icon-color":e.iconColor,"max-width":e.maxWidth,persistent:i.value,closable:!i.value,loading:i.value,type:e.type,onClose:y,onCancel:B,onConfirm:f},{default:s(()=>[u(q,{onSubmit:j(f,["prevent"]),ref_key:"formRef",ref:d},{default:s(()=>[g(l.$slots,"default",{form:V(a),errors:M.value,processing:i.value,submit:f,reset:x,close:y},void 0,!0)]),_:3},512)]),actions:s(()=>[g(l.$slots,"actions",{form:V(a),processing:i.value,submit:f,close:y},()=>[u(F),u(C,{variant:"outlined",onClick:B,disabled:i.value,size:"large"},{default:s(()=>[S(m(e.cancelText),1)]),_:1},8,["disabled"]),u(C,{color:e.submitColor,variant:"elevated",onClick:f,loading:i.value,size:"large",class:"sakal-submit-btn"},{default:s(()=>[e.submitIcon?(c(),$(T,{key:0,start:""},{default:s(()=>[S(m(e.submitIcon),1)]),_:1})):h("",!0),S(" "+m(e.submitText),1)]),_:1},8,["color","loading"])],!0)]),_:3},8,["show","title","subtitle","icon","icon-color","max-width","persistent","closable","loading","type"]))}},ae=W(X,[["__scopeId","data-v-e529c226"]]);export{ae as S};
